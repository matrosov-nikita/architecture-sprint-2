Для каждого из заданий 2, 3, 4 созданы свои директории `mongo-sharding`, `mongo-sharding-repl`, `sharding-repl-cache`, в каждой директории есть файл README как запустить приложение.

### Как запустить финальную версию (с шардированием, репликацией и кэшированием)

Запускаем все сервисы:

```shell
cd sharding-repl-cache
docker compose up -d
```
Убедиться, что все контейнеры поднялись (в `docker ps -a`, status: UP).

Инициализируем все компоненты и заполняем все шарды данными:

```shell
./scripts/mongo_init.sh
```

### Как проверить

При запуске `./scripts/mongo_init.sh` в конце выводится кол-во документов в каждом из шардов, а также кол-во реплик.

1. Откройте в браузере http://localhost:8080, `cache_enabled` должен быть установлен в `true`.

2. Сделать 1-й запрос
```shell
curl -o /dev/null -s -w "%{time_total}\n" 'http://localhost:8080/helloDoc/users' -H 'accept: application/json'
```
Ожидаем, что он пойдет в БД и это займет время (~1c. на моей машине)

3. Сделать 2-й запрос
```shell
curl -o /dev/null -s -w "%{time_total}\n" 'http://localhost:8080/helloDoc/users' -H 'accept: application/json'
```
Ожидаем, что данные уже лежат в Redis и сразу отдадутся клиенту без похода в БД. Ожидаемое время <100мс. (на моей машине 0.004186с ~= 4.2мс)

### Как остановить
```shell
docker compose down --volumes
```

### Итоговая схема в draw.io
Файл со схемами (`sprint2.drawio`) лежит в корне проекта.

Итоговая схема помещена на странице `Итоговая схема`. Остальные страницы соответствуют схемам для заданий 2,3,4,5,6.